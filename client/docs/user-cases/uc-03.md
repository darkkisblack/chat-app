# User Case: UC-03 Открытие чата

# Цель:

Пользователь хочет открыть конкретный чат, чтобы прочитать либо написать сообщение

## Акторы

- Авторизованный пользователь

## Предусловия

- Пользователь авторизован
- Пользователю доступен список чатов (UC-02)
- Соедине websocket активно

## Основной сценарий (Happy path)

1. Пользователь кликает на чат в списке чатов
2. Приложение загружает историю сообщений выбранного чата а так же информацию о собеседнике(ах) (другой(е) пользователь(и), с кем велась переписка)
3. Интерфейс отображает информацию выбранного чата (название, аватар, статус)
4. Подписка на websocket для получения новых сообщений в этом чате
5. Счетчик непрочитанных сообщений сбрасывается, если он был

## Альтернативные сценарии

1. История сообщений не загружается - отображается сообщение об ошибке/индикатор
2. Чат не найден (удален/ошибка id) - отображается "Чат не существует"
3. WebSocket отключен - пробуем подключится повторно, либо показывается статус "offline"

## Постусловия

- Открыт конкретный чат
- Отображаются его сообщения, новые приходят в режиме реального времени
- Непрочитанные сообщения помечены как прочитанные

## Бизнес-ограничения / UX-примечания:

- Автоскролл к последнему сообщению при первом открытии
- Маркеры "Новое сообщение" если пользователь ушел со страницы вернулся
- Возможность подгрузки старых сообщений

## Примечания для разработки

- API (`GET, /chats/:id/messages`)
- WebSocket подписка на `message:new` в чате с ID
- Сброс счетчика непрочитанных сообщений через `PATCH /chats/:id/read`
