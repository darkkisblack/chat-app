# User Case: UC-05 Получнеие входящих сообщений в реальном времени

## Цель:

Пользователь должен видеть новые сообщения в открытом чате сразу после их отправки другим пользователем

## Акторы:

- Авторизированный пользователь
- Другой пользователь , отправляющий сообщение

## Предусловия

- Пользователь авторизован
- У пользователя открыт чат с другим пользователем
- WebSocket соединение активно

## Основной сценарий (Happy path)

1. Другой пользователь отправляет сообщение в чат
2. Сервер отправляет сообщение по WebSocket-соединению
3. Клиент получает сообщение, сообщение добавляется в dom
4. Если пользователь просматривает старые сообщения - отображается индикатор "Новое сообщение"

## Альтернативные сценарии

1. Если WebSocket-соединение разорвано - показывается индикатор переподключения, попытки переподключения
2. Если при парсинге сообщения произошла ошибка - сообщение не отображается, ошибка логируется

## Постусловия

- Новое сообщение отображается в списке сообщений
- Отображается индикатор "Новое сообщение"

## Бизнес-ограничения / UX-примечания:

- Поддержа reconnection на стороне бэкенда обязательна
- При прикрутке вниз чата индикатор "Новое сообщение" должен исчезать

## Примечания для разработки

- Используется WebSocket-соединение
- Клиент подписан на событие `message:new`
- Обработка новых сообщений осущесвляется через глобальный стор (`userChatStore.ts`)
